---           
layout: post
title: Analyzing MTConnect Alarm Data
date: 2011-12-28 12:23:00 UTC
comments: false
categories: mtconnect
---

<div dir="ltr" style="text-align: left;" trbidi="on"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">Machine Tools produce enormous quantities of Alarm data, but analyzing this data can be a challenge. We are primarily interested in finding out how Alarms can help us understand Production disruptions and downtimes.&nbsp;While Machine Tools tend to be chatty with alarms, the alarms contain only limited information of value. Part of the problem is the lack of descriptive alarm text. Take a look at some examples from a modern, multi-axis CNC-controlled machine tool:</span><br /><ul style="text-align: left;"><li><span style="font-family: 'Courier New', Courier, monospace;">+ OVERTRAVEL ( SOFT 1 )</span></li><li><span style="font-family: 'Courier New', Courier, monospace;">1-ROT MOTOR SENSOR ERROR 81</span></li><li><span style="font-family: 'Courier New', Courier, monospace;">HYDRAULIC PRESSURE DOWN</span></li><li><span style="font-family: 'Courier New', Courier, monospace;">HIGH PRESSURE COOLANT CLEAN TANK OIL LOW LEVEL</span></li><li><span style="font-family: 'Courier New', Courier, monospace;">OIL-MATIC TEMP./FILTER ALARM</span></li><li><span style="font-family: 'Courier New', Courier, monospace;">Y AXIS HOME POSITION RETURN REQUEST</span></li></ul><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">While some of these alarms are self-explanatory (like "</span><span style="font-family: 'Courier New', Courier, monospace;">HYDRAULIC PRESSURE DOWN</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">"), other alarms can be a little harder to understand without any context. One way of adding context to Alarms is to look at the </span><span style="font-family: 'Courier New', Courier, monospace;">ControllerMode</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"> and the </span><span style="font-family: 'Courier New', Courier, monospace;">ExecutionStatus</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"> when the Alarm fired, and how they changed across the duration the alarm was active.&nbsp;</span><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">We took several months of data from a multi-axis CNC-controlled Lathe, and we looked at the different Alarms that occurred in this period. To keep the list manageable, we only looked at Alarms which had the severity level "Fault".&nbsp;</span><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">Here are the alarms that occurred during this period:</span><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-vEdJjl0mX28/Tvr-89v963I/AAAAAAAAAAg/AeEf7KGSinQ/s1600/AlarmCount.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"><img border="0" height="337" src="http://2.bp.blogspot.com/-vEdJjl0mX28/Tvr-89v963I/AAAAAAAAAAg/AeEf7KGSinQ/s640/AlarmCount.png" width="640" /></span></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">Alarm Count</span></td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-okX38LBVll0/Tvr--IMM9zI/AAAAAAAAAAo/9r6NkM0ArbE/s1600/AlarmDuration.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"><img border="0" height="337" src="http://2.bp.blogspot.com/-okX38LBVll0/Tvr--IMM9zI/AAAAAAAAAAo/9r6NkM0ArbE/s640/AlarmDuration.png" width="640" /></span></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">Alarm Duration</span></td></tr></tbody></table><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">We can see that the </span><span style="font-family: 'Courier New', Courier, monospace;">Chuck Barrier</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"> alarm occurred the most number of of times, but was not active the longest (that distinction went to the two Spindle-related alarms). To place these alarms in better light, we can look at the&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ControllerMode</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;and </span><span style="font-family: 'Courier New', Courier, monospace;">ExecutionStatus</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"> when these alarms were active:</span><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-gWDoW1A3PmY/Tvr_i1xZ9wI/AAAAAAAAAA0/X0lAnJ-CCHg/s1600/AlarmDurationByExec.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"><img border="0" height="337" src="http://4.bp.blogspot.com/-gWDoW1A3PmY/Tvr_i1xZ9wI/AAAAAAAAAA0/X0lAnJ-CCHg/s640/AlarmDurationByExec.png" width="640" /></span></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">Alarm Duration by Execution Status</span></td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-9Pm07XXIbqc/Tvr_kNIvMWI/AAAAAAAAAA8/MfDhDEezSuo/s1600/AlarmDurationByMode.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"><img border="0" height="337" src="http://3.bp.blogspot.com/-9Pm07XXIbqc/Tvr_kNIvMWI/AAAAAAAAAA8/MfDhDEezSuo/s640/AlarmDurationByMode.png" width="640" /></span></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">Alarm Duration by Controller Mode</span></td></tr></tbody></table><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"><br /></span><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">We are most interested in Alarms that have stopped part production, so we can focus on those have have occurred when the </span><span style="font-family: 'Courier New', Courier, monospace;">ExecutionStatus</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"> was STOPPED or INTERRUPTED. Similarly, Alarms that occur when the Controller was in Manual or MDI mode are probably those which were a by-product of something a user was manually doing on the machine, so we can ignore those to focus on those that occurred when the mode was AUTOMATIC. With this filter, we can see for example that the "</span><span style="font-family: 'Courier New', Courier, monospace;">CHUCK BARRIER</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">" alarm which occurred the most number of times, seems to have exclusively occurred when the&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ExecutionStatus</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;was READY (implying that it was not interrupting program execution) and when the&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ControllerMode</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;was MANUAL (implying that a user was manually operating the machine when the alarm fired). The two Spindle Alarms now look more interesting, since they occurred when the&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ExecutionStatus</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;was STOPPED, and the&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ControllerMode</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;was both AUTOMATIC and MANUAL. This can imply that this alarm did interrupt production, and that it led the the Mode being changed from AUTOMATIC to MANUAL.&nbsp;</span><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">We can dig one level deeper, and look at the combined state mapped by the&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ControllerMode</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;and&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ExecutionStatus</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">:</span><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"><br /></span><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-5zOYhgg-LNA/TvvUkfv5HoI/AAAAAAAAABI/_AreFqSXLP0/s1600/AlarmDurationByState.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"><img border="0" height="338" src="http://2.bp.blogspot.com/-5zOYhgg-LNA/TvvUkfv5HoI/AAAAAAAAABI/_AreFqSXLP0/s640/AlarmDurationByState.png" width="640" /></span></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">Alarm Duration by MetaState</span></td></tr></tbody></table><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;"><br /></span><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">This gives us even more clarity: we can see that two Spindle Alarms switched two states – between STOPPED/AUTOMATIC and STOPPED/MANUAL, further confirming that this Alarm did stop program execution, and that the mode changed from AUTOMATIC to MANUAL.</span><br /><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">Given the lack of clarity in alarm data, looking at the&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ControllerMode</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;and&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ExecutionStatus</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;gives us a better understanding of Alarms that can have an impact on Production. In vimana, we filter Alarms based on the&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ControllerMode</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;and&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">ExecutionStatus</span><span style="font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;">&nbsp;so that we can filter and look at only those that interrupt Production. We also look at temporal patterns between alarms, so that the ordering of alarms can be studied to better understand the phenomena they are describing. Downtimes are classified based on these characteristics of alarms.&nbsp;These will be discussed in this blog in an upcoming post.&nbsp;</span></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/6756902581348409489-3343639514213730954?l=www.manufacturingbigdata.com' alt='' /></div>